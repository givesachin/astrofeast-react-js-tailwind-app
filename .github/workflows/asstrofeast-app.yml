name: GitHub Actions Astrofeast-App
run-name: ${{ github.actor }} has pushed to production ðŸš€
on: [push]
jobs:
  Deploy:
    runs-on: self-hosted
    if: github.ref == 'refs/heads/production'
    env:
         CI: false
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - run: echo "ðŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - name: Install Dependencies
        run: yarn install
      - name: Build App
        run: yarn build
      - name: Move App Build to Production
        run: |
          pm2 stop App
          ls -lah
          cp -r build/* ~/astrofeast/af-react-js-tailwind-app/build/
          rm -rf build/
          ls -lah
          pm2 start App
